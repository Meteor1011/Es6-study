/**
 * å­—ç¬¦çš„ Unicode è¡¨ç¤ºæ³•
 */
//ES6 åŠ å¼ºäº†å¯¹ Unicode çš„æ”¯æŒï¼Œå…è®¸é‡‡ç”¨\uxxxxå½¢å¼è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­xxxxè¡¨ç¤ºå­—ç¬¦çš„ Unicode ç ç‚¹ã€‚
//è¿™ç§è¡¨ç¤ºæ³•åªé™äºç ç‚¹åœ¨\u0000~\uFFFFä¹‹é—´çš„å­—ç¬¦ã€‚è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„å­—ç¬¦ï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªåŒå­—èŠ‚çš„å½¢å¼è¡¨ç¤ºã€‚
"\u0061"
// "a"

"\uD842\uDFB7"
// "ğ ®·"

"\u20BB7"
// " 7"
///å¦‚æœç›´æ¥åœ¨\uåé¢è·Ÿä¸Šè¶…è¿‡0xFFFFçš„æ•°å€¼ï¼ˆæ¯”å¦‚\u20BB7ï¼‰ï¼ŒJavaScript ä¼šç†è§£æˆ\u20BB+7ã€‚
//ç”±äº\u20BBæ˜¯ä¸€ä¸ªä¸å¯æ‰“å°å­—ç¬¦ï¼Œæ‰€ä»¥åªä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºæ ¼ï¼Œåé¢è·Ÿç€ä¸€ä¸ª7ã€‚


//ES6 å¯¹è¿™ä¸€ç‚¹åšå‡ºäº†æ”¹è¿›ï¼Œåªè¦å°†ç ç‚¹æ”¾å…¥å¤§æ‹¬å·ï¼Œå°±èƒ½æ­£ç¡®è§£è¯»è¯¥å­—ç¬¦
"\u{20BB7}"
// "ğ ®·"

"\u{41}\u{42}\u{43}"
// "ABC"

let hello = 123;
hell\u{6F} // 123

'\u{1F680}' === '\uD83D\uDE80'
// true

//JavaScript å…±æœ‰ 6 ç§æ–¹æ³•å¯ä»¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦
'\z' === 'z'  // true
'\172' === 'z' // true
'\x7A' === 'z' // true
'\u007A' === 'z' // true
'\u{7A}' === 'z' // true

/**
 * å­—ç¬¦ä¸²çš„éå†æ¥å£
 * for ... of
 */
 for (let codePoint of 'foo') {
  console.log(codePoint)
}
// "f"
// "o"
// "o"


//ä¼ ç»Ÿçš„foréå†æ— æ³•è¯†åˆ«å¤§äºoxFFFFçš„ç ç‚¹
let text = String.fromCodePoint(0x20BB7);

for (let i = 0; i < text.length; i++) {
  console.log(text[i]);
}
// " "
// " "

for (let i of text) {
  console.log(i);
}
// "ğ ®·"


/**
 * ç›´æ¥è¾“å…¥ U+2028 ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰ å’Œ U+2029ï¼ˆæ®µåˆ†éš”ç¬¦ï¼‰
 */
 'ä¸­' === '\u4e2d' // true
/*
U+005Cï¼šåæ–œæ ï¼ˆreverse solidus)
U+000Dï¼šå›è½¦ï¼ˆcarriage returnï¼‰
U+2028ï¼šè¡Œåˆ†éš”ç¬¦ï¼ˆline separatorï¼‰
U+2029ï¼šæ®µåˆ†éš”ç¬¦ï¼ˆparagraph separatorï¼‰
U+000Aï¼šæ¢è¡Œç¬¦ï¼ˆline feedï¼‰
*/

//JSON.parseè§£æï¼Œå°±æœ‰å¯èƒ½ç›´æ¥æŠ¥é”™ã€‚
const json = '"\u2028"';
JSON.parse(json); // å¯èƒ½æŠ¥é”™

//JSON æ ¼å¼å·²ç»å†»ç»“ï¼ˆRFC 7159ï¼‰ï¼Œæ²¡æ³•ä¿®æ”¹äº†ã€‚ä¸ºäº†æ¶ˆé™¤è¿™ä¸ªæŠ¥é”™ï¼Œ
//ES2019 å…è®¸ JavaScript å­—ç¬¦ä¸²ç›´æ¥è¾“å…¥ U+2028ï¼ˆè¡Œåˆ†éš”ç¬¦ï¼‰å’Œ U+2029ï¼ˆæ®µåˆ†éš”ç¬¦ï¼‰
const PS = eval("'\u2029'"); //ä¸ä¼šæŠ¥é”™

/**
 * JSON.stringify() çš„æ”¹é€ 
 * 
 * UTF-8 æ ‡å‡†è§„å®šï¼Œ0xD800åˆ°0xDFFFä¹‹é—´çš„ç ç‚¹ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…å¯¹ä½¿ç”¨ã€‚
 * æ¯”å¦‚ï¼Œ\uD834\uDF06æ˜¯ä¸¤ä¸ªç ç‚¹ï¼Œä½†æ˜¯å¿…é¡»æ”¾åœ¨ä¸€èµ·é…å¯¹ä½¿ç”¨ï¼Œä»£è¡¨å­—ç¬¦ğŒ†ã€‚
 * è¿™æ˜¯ä¸ºäº†è¡¨ç¤ºç ç‚¹å¤§äº0xFFFFçš„å­—ç¬¦çš„ä¸€ç§å˜é€šæ–¹æ³•ã€‚
 * å•ç‹¬ä½¿ç”¨\uD834å’Œ\uDFO6è¿™ä¸¤ä¸ªç ç‚¹æ˜¯ä¸åˆæ³•çš„ï¼Œæˆ–è€…é¢ å€’é¡ºåºä¹Ÿä¸è¡Œï¼Œ
 * å› ä¸º\uDF06\uD834å¹¶æ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ã€‚
 * JSON.stringify()çš„é—®é¢˜åœ¨äºï¼Œå®ƒå¯èƒ½è¿”å›0xD800åˆ°0xDFFFä¹‹é—´çš„å•ä¸ªç ç‚¹ã€‚
 */
 JSON.stringify('\u{D834}') // "\u{D834}"

/**
 * ç¡®ä¿è¿”å›çš„æ˜¯åˆæ³•çš„ UTF-8 å­—ç¬¦ï¼ŒES2019 æ”¹å˜äº†JSON.stringify()çš„è¡Œä¸ºã€‚
 * å¦‚æœé‡åˆ°0xD800åˆ°0xDFFFä¹‹é—´çš„å•ä¸ªç ç‚¹ï¼Œæˆ–è€…ä¸å­˜åœ¨çš„é…å¯¹å½¢å¼ï¼Œå®ƒä¼šè¿”å›è½¬ä¹‰å­—ç¬¦ä¸²
 */
 JSON.stringify('\u{D834}') // ""\\uD834""
 JSON.stringify('\uDF06\uD834') // ""\\udf06\\ud834""


 /**
  * æ¨¡æ¿å­—ç¬¦ä¸²
  */
//jQuery çš„æ–¹æ³•
$('#result').append(
  'There are <b>' + basket.count + '</b> ' +
  'items in your basket, ' +
  '<em>' + basket.onSale +
  '</em> are on sale!'
);

//ES6 å¼•å…¥äº†æ¨¡æ¿å­—ç¬¦ä¸²
$('#result').append(`
  There are <b>${basket.count}</b> items
   in your basket, <em>${basket.onSale}</em>
  are on sale!
`);

// æ™®é€šå­—ç¬¦ä¸²
`In JavaScript '\n' is a line-feed.`

// å¤šè¡Œå­—ç¬¦ä¸²
`In JavaScript this is
 not legal.`

console.log(`string text line 1
string text line 2`);

// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡
let name = "Bob", time = "today";
`Hello ${name}, how are you ${time}?`

//æ¨¡æ¿å­—ç¬¦ä¸²ä¸­éœ€è¦ä½¿ç”¨åå¼•å·ï¼Œåˆ™å‰é¢è¦ç”¨åæ–œæ è½¬ä¹‰
let greeting = `\`Yo\` World!`;

//æ¨¡æ¿å­—ç¬¦ä¸²è¡¨ç¤ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼å’Œç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¹‹ä¸­
$('#list').html(`
<ul>
  <li>first</li>
  <li>second</li>
</ul>
`);

//å»æ‰æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼å’Œæ¢è¡Œå¯ä»¥ä½¿ç”¨trim
$('#list').html(`
<ul>
  <li>first</li>
  <li>second</li>
</ul>
`.trim());

//æ¨¡æ¿å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨${}ä¹‹ä¸­ã€‚
`User ${user.name} is not authorized to do ${action}.`

//å¤§æ‹¬å·å†…éƒ¨å¯ä»¥æ”¾å…¥ä»»æ„çš„ JavaScript è¡¨è¾¾å¼ï¼Œå¯ä»¥è¿›è¡Œè¿ç®—ï¼Œä»¥åŠå¼•ç”¨å¯¹è±¡å±æ€§ã€‚
let x = 1;
let y = 2;

`${x} + ${y} = ${x + y}`
// "1 + 2 = 3"

`${x} + ${y * 2} = ${x + y * 2}`
// "1 + 4 = 5"

let obj = {x: 1, y: 2};
`${obj.x + obj.y}`
// "3"

//æ¨¡æ¿å­—ç¬¦ä¸²ä¹‹ä¸­è¿˜èƒ½è°ƒç”¨å‡½æ•°
function fn() {
  return "Hello World";
}

`foo ${fn()} bar`
// foo Hello World bar

//å¦‚æœæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ²¡æœ‰å£°æ˜ï¼Œå°†æŠ¥é”™
// å˜é‡placeæ²¡æœ‰å£°æ˜
let msg = `Hello, ${place}`; // æŠ¥é”™

//æ¨¡æ¿å­—ç¬¦ä¸²ç”šè‡³è¿˜èƒ½åµŒå¥—
const tmpl = addrs => `
  <table>
  ${addrs.map(addr => `
    <tr><td>${addr.first}</td></tr>
    <tr><td>${addr.last}</td></tr>
  `).join('')}
  </table>
`;

//å¦‚æœéœ€è¦å¼•ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æœ¬èº«ï¼Œåœ¨éœ€è¦æ—¶æ‰§è¡Œï¼Œå¯ä»¥å†™æˆå‡½æ•°
let func = (name) => `Hello ${name}!`;
func('Jack') // "Hello Jack!"

/**
 * æ¨¡æ¿ç¼–è¯‘
 * è¯¥æ¨¡æ¿ä½¿ç”¨<%...%>æ”¾ç½® JavaScript ä»£ç ï¼Œ
 * ä½¿ç”¨<%= ... %>è¾“å‡º JavaScript è¡¨è¾¾å¼ã€‚
 */
 let template = `
 <ul>
   <% for(let i=0; i < data.supplies.length; i++) { %>
     <li><%= data.supplies[i] %></li>
   <% } %>
 </ul>
 `;

// JavaScript è¡¨è¾¾å¼å­—ç¬¦ä¸²
echo('<ul>');
for(let i=0; i < data.supplies.length; i++) {
  echo('<li>');
  echo(data.supplies[i]);
  echo('</li>');
};
echo('</ul>');

/**
 * æ ‡ç­¾æ¨¡æ¿
 */
alert`hello`
// ç­‰åŒäº
alert(['hello'])

let a = 5;
let b = 10;
//æ¨¡æ¿å­—ç¬¦ä¸²å‰é¢æœ‰ä¸€ä¸ªæ ‡è¯†åtagï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚
//æ•´ä¸ªè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå°±æ˜¯tagå‡½æ•°å¤„ç†æ¨¡æ¿å­—ç¬¦ä¸²åçš„è¿”å›å€¼ã€‚
tag`Hello ${ a + b } world ${ a * b }`;
// ç­‰åŒäº
tag(['Hello ', ' world ', ''], 15, 50);

function tag(stringArr, value1, value2){
  // ...
}

// ç­‰åŒäº

function tag(stringArr, ...values){
  // ...
}

//tagå‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸ªæ•°ç»„ï¼Œå˜é‡æ˜¯ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå‚æ•°
//å˜é‡çš„ç©¿æ’å‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä¸ç¬¬äºŒä¸ªå‚æ•°ä¹‹é—´ï¼Œç¬¬äºŒä¸ªå˜é‡å‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬äºŒä¸ªè·Ÿç¬¬ä¸‰ä¸ªå‚æ•°ä¹‹é—´ï¼Œä»¥æ­¤ç±»æ¨
/**
 * ç¬¬ä¸€ä¸ªå‚æ•°ï¼š['Hello ', ' world ', '']
 * ç¬¬äºŒä¸ªå‚æ•°: 15
 * ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š50
 */

 tag(['Hello ', ' world ', ''], 15, 50) //tagä»¥æ­¤å‡½æ•°è°ƒç”¨

// ç¼–å†™tagå‡½æ•°çš„ä»£ç ã€‚ä¸‹é¢æ˜¯tagå‡½æ•°çš„ä¸€ç§å†™æ³•ï¼Œä»¥åŠè¿è¡Œç»“æœ
let a = 5;
let b = 10;

function tag(s, v1, v2) {
  console.log(s[0]);
  console.log(s[1]);
  console.log(s[2]);
  console.log(v1);
  console.log(v2);

  return "OK";
}

tag`Hello ${ a + b } world ${ a * b}`;
// "Hello "
// " world "
// ""
// 15
// 50
// "OK"